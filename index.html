<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Soan</title>
<style>
  body {
    margin: 0;
    background: #121212;
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
  }

  /* Titre Soan + étoiles */
  .soan-container {
    position: relative;
    font-size: 3rem;
    font-weight: 900;
    color: #ffdd00;
    text-transform: uppercase;
    letter-spacing: 0.3em;
    margin: 1rem 0 2rem;
  }
  .stars {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    pointer-events: none;
    transform: translate(-50%, -50%);
    z-index: -1;
  }
  .star {
    position: absolute;
    color: #fff;
    font-size: 1.2rem;
    animation: twinkle 3s infinite ease-in-out;
    filter: drop-shadow(0 0 3px #fff);
  }
  .star:nth-child(1) { top: 10%; left: 20%; animation-delay: 0s; }
  .star:nth-child(2) { top: 30%; left: 70%; animation-delay: 1s; }
  .star:nth-child(3) { top: 60%; left: 50%; animation-delay: 2s; }
  .star:nth-child(4) { top: 75%; left: 15%; animation-delay: 1.5s; }
  .star:nth-child(5) { top: 40%; left: 80%; animation-delay: 0.7s; }
  @keyframes twinkle {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  /* Bouton + */
  .upload-btn {
    background: #ff0000;
    color: white;
    font-size: 2rem;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: fixed;
    bottom: 20px;
    right: 20px;
    box-shadow: 0 4px 10px rgba(255,0,0,0.6);
    z-index: 100;
  }
  .upload-btn:hover {
    background: #cc0000;
  }

  /* Tri */
  .sort-container {
    margin-bottom: 1rem;
  }
  select {
    padding: 0.4rem;
    background: #222;
    color: white;
    border-radius: 5px;
    border: 1px solid #444;
  }

  /* Galerie vidéos */
  .video-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 1rem;
    width: 100%;
    max-width: 1000px;
  }
  .video-card {
    background: #1e1e1e;
    border-radius: 10px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  video {
    width: 100%;
    height: auto;
    background: black;
  }
  .video-info {
    padding: 0.8rem;
  }
  .video-title {
    font-weight: bold;
    margin-bottom: 0.4rem;
  }
  .video-desc {
    font-size: 0.9rem;
    color: #ccc;
    margin-bottom: 0.6rem;
  }
  .video-actions {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.6rem;
  }
  .btn {
    flex: 1;
    padding: 0.4rem;
    background: #333;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
  }
  .btn:hover {
    background: #555;
  }
  .liked {
    background: #e63946;
  }
  .fav {
    background: #ff0000;
  }

  /* Commentaires */
  .comments {
    margin-top: 0.6rem;
  }
  .comment-input {
    width: 100%;
    padding: 0.4rem;
    margin-bottom: 0.4rem;
    border-radius: 5px;
    border: 1px solid #444;
    background: #222;
    color: white;
  }
  .comment-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.85rem;
    color: #ccc;
  }
  .comment-list li {
    border-bottom: 1px solid #333;
    padding: 0.3rem 0;
  }
</style>
</head>
<body>

  <div class="soan-container">
    Soan
    <div class="stars">
      <span class="star">★</span>
      <span class="star">★</span>
      <span class="star">★</span>
      <span class="star">★</span>
      <span class="star">★</span>
    </div>
  </div>

  <div class="sort-container">
    <label for="sort">Trier par : </label>
    <select id="sort">
      <option value="title">Titre</option>
      <option value="likes">Likes</option>
      <option value="fav">Favoris</option>
    </select>
  </div>

  <div class="video-grid" id="videoGrid"></div>

  <!-- Bouton Upload -->
  <button class="upload-btn" id="uploadBtn">+</button>
  <input type="file" id="fileInput" accept="video/*" style="display:none" />

<script>
  const videoGrid = document.getElementById('videoGrid');
  const fileInput = document.getElementById('fileInput');
  const uploadBtn = document.getElementById('uploadBtn');
  const sortSelect = document.getElementById('sort');

  let videos = JSON.parse(localStorage.getItem('videos') || '[]');

  function saveVideos() {
    localStorage.setItem('videos', JSON.stringify(videos));
  }

  function renderVideos() {
    videoGrid.innerHTML = '';
    let sorted = [...videos];
    if (sortSelect.value === 'title') {
      sorted.sort((a,b) => a.title.localeCompare(b.title));
    } else if (sortSelect.value === 'likes') {
      sorted.sort((a,b) => b.likes - a.likes);
    } else if (sortSelect.value === 'fav') {
      sorted.sort((a,b) => (b.fav?1:0) - (a.fav?1:0));
    }
    sorted.forEach((vid, index) => {
      const card = document.createElement('div');
      card.className = 'video-card';
      const videoEl = document.createElement('video');
      videoEl.src = vid.url;
      videoEl.controls = true;
      const info = document.createElement('div');
      info.className = 'video-info';
      const title = document.createElement('div');
      title.className = 'video-title';
      title.textContent = vid.title;
      const desc = document.createElement('div');
      desc.className = 'video-desc';
      desc.textContent = vid.desc;
      const actions = document.createElement('div');
      actions.className = 'video-actions';
      const likeBtn = document.createElement('button');
      likeBtn.className = 'btn' + (vid.liked ? ' liked' : '');
      likeBtn.textContent = `♥ ${vid.likes}`;
      likeBtn.onclick = () => {
        vid.liked = !vid.liked;
        vid.likes += vid.liked ? 1 : -1;
        saveVideos();
        renderVideos();
      };
      const favBtn = document.createElement('button');
      favBtn.className = 'btn' + (vid.fav ? ' fav' : '');
      favBtn.textContent = '★';
      favBtn.onclick = () => {
        vid.fav = !vid.fav;
        saveVideos();
        renderVideos();
      };
      actions.appendChild(likeBtn);
      actions.appendChild(favBtn);

      // Commentaires
      const commentsDiv = document.createElement('div');
      commentsDiv.className = 'comments';
      const commentInput = document.createElement('input');
      commentInput.className = 'comment-input';
      commentInput.placeholder = 'Ajouter un commentaire...';
      commentInput.onkeypress = (e) => {
        if (e.key === 'Enter' && commentInput.value.trim() !== '') {
          vid.comments.push(commentInput.value.trim());
          commentInput.value = '';
          saveVideos();
          renderVideos();
        }
      };
      const commentList = document.createElement('ul');
      commentList.className = 'comment-list';
      vid.comments.forEach(c => {
        const li = document.createElement('li');
        li.textContent = c;
        commentList.appendChild(li);
      });
      commentsDiv.appendChild(commentInput);
      commentsDiv.appendChild(commentList);

      info.appendChild(title);
      info.appendChild(desc);
      info.appendChild(actions);
      info.appendChild(commentsDiv);
      card.appendChild(videoEl);
      card.appendChild(info);
      videoGrid.appendChild(card);
    });
  }

  uploadBtn.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (file) {
      const url = URL.createObjectURL(file);
      const title = prompt('Titre de la vidéo :') || 'Sans titre';
      const desc = prompt('Description :') || '';
      videos.push({ title, desc, url, likes: 0, liked: false, fav: false, comments: [] });
      saveVideos();
      renderVideos();
    }
  });

  sortSelect.addEventListener('change', renderVideos);

  renderVideos();
</script>
</body>
</html>
